---
name: "creeps运行守则"
description: "强制执行 Creep 的基于角色的约束。在定义、调试或优化 Creep 逻辑时调用，以确保它们遵守分配的职责。"
---

# Creeps 运行守则 (Creeps Operation Protocol)

此技能提供了代码库中所有 Creep 的标准操作程序和约束。在实现或调试 Creep 行为时，请以此作为参考。

## 核心原则 (Core Principle)

1.  **“专人专职” (One Role, One Job)**：每个 Creep 必须有定义的角色，并严格遵守分配给该角色的任务。除非明确定义为紧急协议，否则禁止跨角色活动。
2.  **“定点工作” (Stationary Work)**：采集者、升级者和建造者（尽可能）应在工作地点保持**稳定不动**。通过减少移动，提高工作效率并降低 CPU 消耗。
3.  **“全权运输” (Centralized Logistics)**：所有的能量运输工作应由 **搬运工 (Hauler)** 承担。其他角色不应进行长途运输。

## 角色约束 (Role Constraints)

### 1. 采集者 (Harvester)

- **定位**：**稳定不动**。驻扎在能量源 (Source) 旁的容器 (Container) 上。
- **主要任务**：持续采集能量。
- **次要任务**：将能量转移到脚下的容器。
- **允许**：
  - 维修脚下的容器（自我维护）。
  - 在范围 3 内建造工地（如果能量已满且没有容器）。
- **禁止**：
  - **任何形式的长途运输**。
  - 移动离开分配的 Source（除非容器被摧毁或需要逃生）。
  - 移动到控制器或重生点。

### 2. 搬运工 (Hauler)

- **定位**：**全图游走**。是物流网络的血管。
- **主要任务**：承担所有运输工作。
  - 将能量从采矿容器运送到重生点/扩展/仓库。
  - 将能量运送到控制器容器（供升级者使用）。
  - 将能量运送到建造现场附近的容器（供建造者使用）。
- **允许**：
  - 捡起掉落的能量。
  - 从墓碑/废墟中提取能量。
- **禁止**：
  - 采集能量。
  - 将能量运回采矿容器（防止回流）。
  - 升级控制器。

### 3. 升级者 (Upgrader)

- **定位**：**稳定不动**。驻扎在控制器 (Controller) 旁的容器或链路 (Link) 附近。
- **主要任务**：持续升级控制器。
- **物流模式**：**等待喂养**。依靠搬运工将能量运送到身边的容器中，或通过 Link 传输。
- **禁止**：
  - 移动去远处的 Source 或 Storage 取货（应由 Hauler 代劳）。
  - 建造工地。
  - 运输能量。

### 4. 建造者 (Builder)

- **定位**：**区域稳定**。在工地附近工作，尽量减少长途奔波。
- **主要任务**：建造工地。
- **物流模式**：就近取货。优先从附近的容器、仓库或掉落资源获取能量。
- **禁止**：
  - 从 Source 直接采集（除非紧急情况）。
  - 长途运输能量给 Spawn（这是 Hauler 的活）。

## 实现指南 (Implementation Guidelines)

1.  **身体部件优化**：对于“定点工作”的 Creep (Harvester/Upgrader)，可以减少 `MOVE` 部件的数量（只需到达工作点即可），增加 `WORK` 部件以提高效率。
2.  **状态机**：始终使用布尔开关（例如 `memory.working`）在收集和工作状态之间切换。
3.  **互斥动作**：确保每 tick 仅执行一个动作。
4.  **视觉反馈**：使用 `creep.say()` 可视化当前状态。
